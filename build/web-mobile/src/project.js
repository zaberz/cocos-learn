require=function r(a,s,i){function l(t,e){if(!s[t]){if(!a[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(p)return p(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var c=s[t]={exports:{}};a[t][0].call(c.exports,function(e){return l(a[t][1][e]||e)},c,c.exports,r,a,s,i)}return s[t].exports}for(var p="function"==typeof require&&require,e=0;e<i.length;e++)l(i[e]);return l}({GLOBAL:[function(e,t,o){"use strict";cc._RF.push(t,"a051fHlAIFC7JYqm45pz6Eq","GLOBAL"),window.GLOBAL_DATA={game:null},cc._RF.pop()},{}],edge:[function(e,t,o){"use strict";cc._RF.push(t,"d73f05Nr3pOgaVzdc/zLoS9","edge"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],game:[function(e,t,o){"use strict";cc._RF.push(t,"5e24eSafB9DhoR+Xu4880Jd","game");var n=e("player");cc.Class({extends:cc.Component,properties:{platformPrefab:{default:null,type:cc.Prefab},player:{default:null,type:n},healthProgress:{default:null,type:cc.Node},platformPoolLayer:{default:null,type:cc.Node}},onLoad:function(){(GLOBAL_DATA.game=this).platformPool=new cc.NodePool("platform"),cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit,this.node.on("die",function(){console.log("You have died.")})},spawnNewPlatform:function(){var e=null;e=0<this.platformPool.size()?this.platformPool.get(this):cc.instantiate(this.platformPrefab),this.platformPoolLayer.addChild(e),e.setPosition(this.getNewPlatformPosition())},getNewPlatformPosition:function(){var e=this.node.x/2*cc.randomMinus1To1();return cc.p(e,-667)},start:function(){var e=this;this.spawnNewPlatform(),setTimeout(function(){e.spawnNewPlatform()},2e3),setTimeout(function(){e.spawnNewPlatform()},4e3),setTimeout(function(){e.spawnNewPlatform()},6e3),setTimeout(function(){e.spawnNewPlatform()},8e3)}}),cc._RF.pop()},{player:"player"}],platform:[function(e,t,o){"use strict";cc._RF.push(t,"0b1ee4YtyFKRIQE1Dd8uW0V","platform");var n=e("player");cc.Class({extends:cc.Component,properties:{ySpeed:100,game:{default:null,serializable:!1},player:{default:null,type:n}},reuse:function(){console.log("reuse")},start:function(){this.player=GLOBAL_DATA.game.player,this.getComponent("cc.RigidBody").linearVelocity=cc.p(0,100)},update:function(e){var t=this.node.y;if(GLOBAL_DATA.game.node.height/2<t){GLOBAL_DATA.game.platformPool.put(this.node);var o=2e3*cc.random0To1();setTimeout(function(){GLOBAL_DATA.game.spawnNewPlatform()},o)}}}),cc._RF.pop()},{player:"player"}],player:[function(e,t,o){"use strict";cc._RF.push(t,"dbba0uD12VD+7Th0bqSRvqn","player");var n=null;cc.Class({extends:cc.Component,properties:{lostHealth:0},start:function(){this.setInputControler();var e=this.getComponent("cc.PhysicsBoxCollider");e.density=1,e.apply(),(n=this.getComponent("cc.RigidBody")).enabledContactListener=!0;n.getMass()},setInputControler:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onKeyDown:function(e){switch(e.keyCode){case cc.KEY.a:case cc.KEY.left:n.applyForceToCenter(cc.p(-3e4,0));break;case cc.KEY.d:case cc.KEY.right:n.applyForceToCenter(cc.p(3e4,0))}},onKeyUp:function(e){switch(e.keyCode){case cc.KEY.a:case cc.KEY.left:n.applyForceToCenter(cc.p(0,0));break;case cc.KEY.d:case cc.KEY.right:n.applyForceToCenter(cc.p(0,0))}},update:function(e){var t=GLOBAL_DATA.game.healthProgress.getComponent("cc.ProgressBar").progress;0!==this.lostHealth?t<=0?(GLOBAL_DATA.game.healthProgress.getComponent("cc.ProgressBar").progress=0,this.node.dispatchEvent(new cc.Event.EventCustom("die",!0))):GLOBAL_DATA.game.healthProgress.getComponent("cc.ProgressBar").progress-=.01*this.lostHealth:t<1&&(GLOBAL_DATA.game.healthProgress.getComponent("cc.ProgressBar").progress+=.01)},onBeginContact:function(e,t,o){"platform"!==o.node.group&&(this.lostHealth+=1)},onEndContact:function(e,t,o){"platform"!==o.node.group&&(this.lostHealth-=1)}}),cc._RF.pop()},{}]},{},["GLOBAL","edge","game","platform","player"]);