__require=function e(t,o,c){function n(a,s){if(!o[a]){if(!t[a]){var i=a.split("/");if(i=i[i.length-1],!t[i]){var l="function"==typeof __require&&__require;if(!s&&l)return l(i,!0);if(r)return r(i,!0);throw new Error("Cannot find module '"+a+"'")}}var p=o[a]={exports:{}};t[a][0].call(p.exports,function(e){return n(t[a][1][e]||e)},p,p.exports,e,t,o,c)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<c.length;a++)n(c[a]);return n}({GLOBAL:[function(e,t,o){"use strict";cc._RF.push(t,"a051fHlAIFC7JYqm45pz6Eq","GLOBAL"),window.GLOBAL_DATA={game:null},setTimeout(function(){console.log(cc.director),console.log(cc.director.getPhysicsManager()),cc.director.getPhysicsManager().enabled=!0},1e3),cc._RF.pop()},{}],connect:[function(e,t,o){"use strict";cc._RF.push(t,"1c616ZhldZDfLaidOKD/QAu","connect"),cc._RF.pop()},{}],edge:[function(e,t,o){"use strict";cc._RF.push(t,"d73f05Nr3pOgaVzdc/zLoS9","edge"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],gameOver:[function(e,t,o){"use strict";cc._RF.push(t,"1ab1cNuF3VC1LqNr6kbKJuA","gameOver"),cc.Class({extends:cc.Component,properties:{btnRestart:{default:null,type:cc.Node}},start:function(){this.btnRestart.on("touchstart",function(){cc.director.loadScene("game")})}}),cc._RF.pop()},{}],game:[function(e,t,o){"use strict";cc._RF.push(t,"5e24eSafB9DhoR+Xu4880Jd","game");var c=e("player");cc.Class({extends:cc.Component,properties:{platformPrefab:{default:null,type:cc.Prefab},enemyPrefab:{default:null,type:cc.Prefab},player:{default:null,type:c},healthProgress:{default:null,type:cc.Node},platformPoolLayer:{default:null,type:cc.Node}},onLoad:function(){GLOBAL_DATA.game=this,this.platformPool=new cc.NodePool("platform"),this.node.on("die",function(){cc.director.loadScene("gameOver")})},spawnNewPlayer:function(e,t){var o=cc.instantiate(this.enemyPrefab);o.name=e,this.node.addChild(o),o.setPosition(this.getNewPlatformPosition())},spawnNewPlatform:function(e){var t=null;t=this.platformPool.size()>0?this.platformPool.get(this):cc.instantiate(this.platformPrefab),this.platformPoolLayer.addChild(t),t.setPosition(cc.p(e.x,e.y))},getNewPlatformPosition:function(){var e=this.node.x/2*cc.randomMinus1To1();return cc.p(e,-667)},start:function(){},enemyMove:function(e){var t=e.id,o=this.node.getChildByName(t),c=e.x,n=e.y,r=e.rotation,a=e.speedX,s=e.speedY,i=e.velocity;o.x=c,o.y=n,o.rotation=r,o.getComponent("cc.RigidBody").linearVelocity=cc.p(a,s),o.getComponent("cc.RigidBody").angularVelocity=i}}),cc._RF.pop()},{player:"player"}],platform:[function(e,t,o){"use strict";cc._RF.push(t,"0b1ee4YtyFKRIQE1Dd8uW0V","platform");var c=e("player");cc.Class({extends:cc.Component,properties:{ySpeed:100,game:{default:null,serializable:!1},player:{default:null,type:c}},reuse:function(){console.log("reuse")},start:function(){this.player=GLOBAL_DATA.game.player,this.getComponent("cc.RigidBody").linearVelocity=cc.p(0,100)},update:function(e){}}),cc._RF.pop()},{player:"player"}],player:[function(e,t,o){"use strict";cc._RF.push(t,"dbba0uD12VD+7Th0bqSRvqn","player");var c=null;cc.Class({extends:cc.Component,properties:{lostHealth:0},start:function(){this.setInputControler();var e=this.getComponent("cc.PhysicsBoxCollider");e.density=1,e.apply(),(c=this.getComponent("cc.RigidBody")).enabledContactListener=!0;c.getMass()},setInputControler:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},onKeyDown:function(e){switch(e.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.left:c.applyForceToCenter(cc.p(-3e4,0));break;case cc.macro.KEY.d:case cc.macro.KEY.right:c.applyForceToCenter(cc.p(3e4,0))}var t=this.node;t.x,t.y,t.rotation,(c=this.getComponent("cc.RigidBody")).linearVelocity,c.angularVelocity},onKeyUp:function(e){switch(e.keyCode){case cc.macro.KEY.a:case cc.macro.KEY.left:c.applyForceToCenter(cc.p(0,0));break;case cc.macro.KEY.d:case cc.macro.KEY.right:c.applyForceToCenter(cc.p(0,0))}var t=this.node;t.x,t.y,t.rotation,(c=this.getComponent("cc.RigidBody")).linearVelocity,c.angularVelocity},update:function(e){var t=GLOBAL_DATA.game.healthProgress.getComponent("cc.ProgressBar").progress;0!==this.lostHealth?t<=0?(GLOBAL_DATA.game.healthProgress.getComponent("cc.ProgressBar").progress=0,this.node.dispatchEvent(new cc.Event.EventCustom("die",!0)),emitDead()):GLOBAL_DATA.game.healthProgress.getComponent("cc.ProgressBar").progress-=.01*this.lostHealth:t<1&&(GLOBAL_DATA.game.healthProgress.getComponent("cc.ProgressBar").progress+=.01)},onBeginContact:function(e,t,o){"platform"!==o.node.group&&"player"!==o.node.group&&(this.lostHealth+=1)},onEndContact:function(e,t,o){"platform"!==o.node.group&&"player"!==o.node.group&&(this.lostHealth-=1)}}),cc._RF.pop()},{}],start:[function(e,t,o){"use strict";cc._RF.push(t,"e5d16xhIAVBTakN8JTeDGjw","start"),cc.Class({extends:cc.Component,properties:{inputName:{default:null,type:cc.Node},btnStart:{default:null,type:cc.Node}},start:function(){var e=this;this.btnStart.on("touchstart",function(){e.inputName.getComponent("cc.EditBox").string;cc.director.loadScene("game"),setInterval(function(){window.GLOBAL_DATA.game.spawnNewPlatform(e.spawnPlatformPosition())},2e3)})},spawnPlatformPosition:function(){var e=750,t=-1334/2;return{x:(Math.random()-.5)*e,y:t}}}),cc._RF.pop()},{}]},{},["GLOBAL","connect","edge","game","gameOver","platform","player","start"]);
//# sourceMappingURL=project.js.map